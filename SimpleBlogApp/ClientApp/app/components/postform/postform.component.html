<h1>{{pageTitle}}</h1>

<!-- <p>{{tagsBuilder | json}}</p> -->

<form class="post-form" #postForm="ngForm" (ngSubmit)="onSubmit(postForm)" novalidate>
<div class="col-xs-12">

  <!-- Id -->
  <div *ngIf="id" class="form-group form-horizontal">
    <div class="row">
      <label class="col-xs-1 control-label text-align-left">Id:</label>
      <div class="col-xs-11"> 
        <p class="form-control-static">{{id}}</p> 
      </div>
    </div>
  </div>

  <!-- Title -->
  <div class="form-group has-feedback" [class.has-error]="postTitle.touched && !postTitle.valid">
    <label for="postTitle">Title</label>
    <input 
      required
      id="postTitle"
      type="text"
      class="form-control" 
      [(ngModel)]="savePost.title" 
      name="postTitle" 
      #postTitle="ngModel" >
    <!-- <div class="alert alert-danger" *ngIf="postTitle.touched && !postTitle.valid">Please specify the title.</div> -->
    <span class="glyphicon glyphicon-remove form-control-feedback" *ngIf="postTitle.touched && !postTitle.valid"></span>
  </div>

  <!-- ShortContent -->
  <div class="form-group">
    <label for="shortContent">Short content</label>
    <textarea id="shortContent" type="text" class="form-control content-textarea" [(ngModel)]="savePost.shortContent" name="shortContent"></textarea>
  </div>

  <!-- Content -->
  <div class="form-group has-feedback" [class.has-error]="postContent.touched && !postContent.valid">
    <label for="postContent">Content</label>
      <textarea 
        required
        id="postContent"
        type="text" 
        class="form-control content-textarea" 
        [(ngModel)]="savePost.content" 
        name="postContent" 
        #postContent="ngModel" ></textarea>
    <!-- <div class="alert alert-danger" *ngIf="postContent.touched && !postContent.valid">Please specify the title.</div> -->
    <span class="glyphicon glyphicon-remove form-control-feedback" *ngIf="postContent.touched && !postContent.valid"></span>
  </div>

  <!-- Category -->
  <div class="form-group has-feedback" [class.has-error]="category.touched && !category.valid">
    <label for="category">Category</label>
    <select 
      required
      id="category" 
      class="form-control" 
      [(ngModel)]="savePost.categoryId" 
      name="category"
      #category="ngModel">
        <option *ngIf="!savePost.categoryId" value=""></option>
        <option *ngFor="let c of categories" value="{{c.id}}">{{c.name}}</option>
    </select>
    <!-- <div class="alert alert-danger" *ngIf="category.touched && !category.valid">Please specify the category.</div> -->
    <span class="glyphicon glyphicon-remove form-control-feedback" *ngIf="category.touched && !category.valid"></span>
  </div>

  <!-- Tags -->
  <div class="form-group">
    <label for="tags">Tags</label>
    <tag-input 
      id="tags" 
      [(ngModel)]="tagsBuilder" 
      (onTextChange)="onTagsChange($event)" 
      name="tags"
      [identifyBy]="'id'" 
      [displayBy]="'name'">
        <tag-input-dropdown [identifyBy]="'id'" [displayBy]="'name'" [autocompleteItems]="autocompleteTags"></tag-input-dropdown>
    </tag-input>
  </div>

  <!-- Date Created -->
  <div *ngIf="id" class="form-group form-horizontal">
    <div class="row">
      <label class="col-xs-12 col-sm-1 control-label text-align-left">Created:</label>
      <div class="col-xs-12 col-sm-11"> 
        <p class="form-control-static">{{dateCreated}}</p> 
      </div>
    </div>
  </div>

  <!-- Buttons -->
  <div class="form-group">
    <button type="submit" class="btn btn-primary" [disabled]="postForm.invalid">Save</button>
    <button type="button" *ngIf="id" class="btn btn-danger" (click)="delete()">Delete</button>
    <a [routerLink]="['/admin']" class="btn btn-primary">Back</a>
  </div>
</div>
</form>